<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinder App Debug</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; background-color: #000; color: #0f0; padding: 20px; font-size: 18px; }
        pre { white-space: pre-wrap; word-wrap: break-word; }
    </style>
</head>
<body>
    <h1 id="status">Loading...</h1>
    
<script>
    try {
        const statusEl = document.getElementById('status');
        statusEl.textContent = '✅ Step 1: JavaScript is running.';

        // Check if the Telegram script loaded the WebApp object
        if (window.Telegram && window.Telegram.WebApp) {
            statusEl.textContent = '✅ Step 2: Telegram script loaded successfully!';
            
            const tg = window.Telegram.WebApp;

            // This is the most important step. We wait for Telegram to say it's ready.
            tg.ready(() => {
                statusEl.textContent = '✅ Step 3: tg.ready() event fired!';
                
                tg.expand();

                setTimeout(() => {
                    const finalStatus = [
                        '✅ All Systems Go!',
                        `- Version: ${tg.version}`,
                        `- Platform: ${tg.platform}`,
                        `- Is Expanded: ${tg.isExpanded}`
                    ];
                    statusEl.innerHTML = finalStatus.join('<br>');
                }, 500);
            });

        } else {
            statusEl.textContent = '❌ Error: Telegram WebApp script did NOT load the tg object!';
        }

    } catch (e) {
        // If any unexpected error happens, display it on the screen.
        document.body.innerHTML = '<h1>A critical JavaScript error occurred:</h1><pre>' + e.stack + '</pre>';
    }
</script>
</body>
</html>
